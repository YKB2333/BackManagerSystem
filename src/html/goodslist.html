<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>center</title>
    <link rel="stylesheet" href="../assets/layui/css/layui.css">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/common.css">
    <script src="../lib/jquery-1.10.1.min.js"></script>
    <!-- <link rel="stylesheet" href="../assets/layui/layui.js">
    <link rel="stylesheet" href="../assets/layui/layui.all.js"> -->
    <script src="../assets/layui/layui.js"></script>
    <script src="../js/common.js"></script>
</head>
<body>
    <div id="ManagerSystem">
        <div class="left_menu">
            <ul>后台管理系统</ul>
            <dl>
                <dt>商品管理</dt>
                <dd>
                    <em><a href="javascript:;">商品列表</a></em>
                    <em><a href="">商品分类</a></em>
                    <em><a href="addGoods.html">添加商品</a></em>
                </dd>
            </dl>
            <dl>
                <dt>用户管理</dt>
                <dd>
                    <em><a href="">用户列表</a></em>
                    <em><a href="">添加用户</a></em>
                </dd>
            </dl>
            <dl>
                <dt>订单管理</dt>
                <dd>
                    <em><a href="">订单列表</a></em>
                </dd>
            </dl>
        </div>
        <div class="main">
            <div class="top_path">
                <a href="">首页</a>
                <!-- /
                <a href="">商品管理</a>
                /
                <a href="">商品分类</a> -->
            </div>
            <div id="content" class="main_bottom">
                <div class="box">
                    <img src="../img/center/u70.png" class="u70_img1 u70" alt="">
                    <img src="../img/center/u70.png" class="u70_img2 u70" alt="">
                    <img src="../img/center/u70.png" class="u70_img3 u70" alt="">
                    <img src="../img/center/u70.png" class="u70_img4 u70" alt="">
                    <div class="core"  id="core_content">
                        <table id="demo" lay-filter="test"></table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</body>

<script type="text/html" id="barDemo">
    <a class="layui-btn layui-btn-xs" lay-event="detail">查看</a>
    <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>
<script>
    // layui.use('table', function(){
    //     var table = layui.table;
        
    //     //第一个实例
    //     table.render({
    //     elem: '#demo'
    //     ,height: 312
    //     ,url: '/demo/table/user/' //数据接口
    //     ,page: true //开启分页
    //     ,cols: [[ //表头
    //         {field: 'id', title: 'ID', width:80, sort: true, fixed: 'left'}
    //         ,{field: 'username', title: '用户名', width:80}
    //         ,{field: 'sex', title: '性别', width:80, sort: true}
    //         ,{field: 'city', title: '城市', width:80} 
    //         ,{field: 'sign', title: '签名', width: 177}
    //         ,{field: 'experience', title: '积分', width: 80, sort: true}
    //         ,{field: 'score', title: '评分', width: 80, sort: true}
    //         ,{field: 'classify', title: '职业', width: 80}
    //         ,{field: 'wealth', title: '财富', width: 135, sort: true}
    //     ]]
    //     });
        
    // });
</script>
<script>
    layui.use('table', function(){
    var table = layui.table;
 
    //执行渲染
    // table.render({
    // elem: '#demo' //指定原始表格元素选择器（推荐id选择器）
    // ,height: 315 //容器高度
    // ,cols: [{}] //设置表头
    // //,…… //更多参数参考右侧目录：基本参数选项
    // });

    //场景一：下述方法中的键值即为基础参数项
    table.render({
        elem: '#demo', //指定原始表格元素选择器（推荐id选择器）
        height: 300,
        url: '/goodslist',
        page:true,
        initSort:'id',
        // parseData: function(res){ //res 即为原始返回的数据
        //     return {
        //     "code": res.status, //解析接口状态
        //     "msg": res.message, //解析提示文本
        //     "count": res.total, //解析数据长度
        //     "data": res.data.item //解析数据列表
        //     };
        // },
        cols:  [[ //标题栏
        {checkbox: true}
        // ,{field: 'id', title: 'ID', width: 80}
        // ,{field: 'goodsname', title: '商品名称', width: 120}
        // ,{field: 'goodsname', title: '分类', width: 120}
        // ,{field: 'old_price', title: '价格（原价）', width: 80}
        // ,{field: 'now_price', title: '价格（现价）', width: 80}
        // ,{field: 'number', title: '库存', width: 60}
        // ,{field: 'state', title: '状态', width: 80}
        // ,{field: 'Adding_time', title: '添加时间', width: 80}
        // // ,{field: 'operation', title: '操作', width: 120}
        // ,{fixed: 'operation', width:150, align:'center', toolbar: '#barDemo'}
        ,{field: 'id', title: 'ID', width:80, sort: true, fixed: 'left'}
            ,{field: 'username', title: '用户名', width:80}
            ,{field: 'sex', title: '性别', width:80, sort: true}
            ,{field: 'city', title: '城市', width:80} 
            ,{field: 'sign', title: '签名', width: 177}
            ,{field: 'experience', title: '积分', width: 80, sort: true}
            ,{field: 'score', title: '评分', width: 80, sort: true}
            ,{field: 'classify', title: '职业', width: 80}
            ,{field: 'wealth', title: '财富', width: 135, sort: true}
            ,{fixed: 'operation', width:150, align:'center', toolbar: '#barDemo'}
        ]]
    });

        //方法渲染：
        // table.render({
        // cols:  [[ //标题栏
        //     {checkbox: true}
        //     ,{field: 'id', title: 'ID', width: 80}
        //     ,{field: 'username', title: '用户名', width: 120}
        // ]]
        // });
        //监听工具条
    table.on('tool(test)', function(obj){ //注：tool是工具条事件名，test是table原始容器的属性 lay-filter="对应的值"
    var data = obj.data; //获得当前行数据
    var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）
    var tr = obj.tr; //获得当前行 tr 的DOM对象
    
    if(layEvent === 'detail'){ //查看
        //do somehing
    } else if(layEvent === 'del'){ //删除
        layer.confirm('真的删除行么', function(index){
        obj.del(); //删除对应行（tr）的DOM结构，并更新缓存
        layer.close(index);
        //向服务端发送删除指令
        });
    } else if(layEvent === 'edit'){ //编辑
        //do something
        
        //同步更新缓存对应的值
        obj.update({
        username: '123'
        ,title: 'xxx'
        });
    }
    });
})
</script>

    
</html>