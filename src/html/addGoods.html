<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>添加商品</title>
    <link rel="stylesheet" href="../assets/layui/css/layui.css">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/addGoods.css">
    <script src="../lib/jquery-1.10.1.min.js"></script>
    <script src="../assets/layui/layui.js"></script>
    <script src="../js/common.js"></script>
    <script src="../js/addGoods.js"></script>
</head>
<body>
    <div id="ManagerSystem">
        <div class="left_menu">
            <ul>后台管理系统</ul>
            <dl>
                <dt>商品管理</dt>
                <dd>
                    <em><a href="../html/goodslist.html">商品列表</a></em>
                    <em><a href="../html/goods_category.html">商品分类</a></em>
                    <em><a href="../html/addGoods.html">添加商品</a></em>
                </dd>
            </dl>
            <dl>
                <dt>用户管理</dt>
                <dd>
                    <em><a href="../html/user_list.html">用户列表</a></em>
                    <em><a href="../html/user_add.html">添加用户</a></em>
                </dd>
            </dl>
            <dl>
                <dt>订单管理</dt>
                <dd>
                    <em><a href="../html/order_list.html">订单列表</a></em>
                </dd>
            </dl>
        </div>
        <div class="main">
            <div class="top_path">
                <a href="../html/center.html">首页</a>
                /
                <a href="javascript:;">商品管理</a>
                /
                <a href="javascript:;" style="color: #666666">添加商品</a>
                <div id="login" class="login fr">
                    <!-- <a href="../index.html">退出</a> -->
                </div>
            </div>

            <div id="content" class="main_bottom">
                <div class="box">
                    <img src="../img/center/u70.png" class="u70_img1 u70" alt="">
                    <img src="../img/center/u70.png" class="u70_img2 u70" alt="">
                    <img src="../img/center/u70.png" class="u70_img3 u70" alt="">
                    <img src="../img/center/u70.png" class="u70_img4 u70" alt="">
                    <div class="core" id="core_content">
                        <!-- <ul>
                            <li style="margin-top: 18px">
                                <label for="goods_name">商品名称</label>
                                <input type="text" id="goods_name" class="input1" placeholder="请输入商品名称">
                                <span>50字以内</span>
                            </li>
                            <li>
                                <label for="Subheading">商品副标题</label>
                                <input type="text" id="Subheading"  class="input1" placeholder="请输入商品副标题">
                            </li>
                            <li>
                                <label for="Subheading">商品价格</label>
                                <input type="text" id="old_price"  class="input2">
                                <label for="Subheading">销售价格</label>
                                <input type="text" id="sale_price"  class="input2">
                            </li>
                            <li>
                            </li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                        </ul> -->
                        <form class="layui-form" action="">
                            <div class="layui-form-item"  style="margin-top: 26px">
                                <label class="layui-form-label">商品名称</label>
                                <div class="layui-input-block">
                                    
                                    <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="请输入商品名称" class="layui-input input1" id="goods_name">
                                    <span>50字以内</span>
                                </div>
                            </div>
                            <div class="layui-form-item"   style="margin-top: 16px">
                                <label class="layui-form-label">商品副标题</label>
                                <div class="layui-input-block">
                                <input type="text" name="username" placeholder="请输入商品副标题" autocomplete="off" class="layui-input input1" id="sub_heading">
                                <span>100字以内</span>
                                </div>
                            </div>
                            
                            <div class="layui-form-item"   style="margin-top: 10px">
                                <div class="layui-inline"   style="margin: 0">
                                    <label class="layui-form-label">商品价格</label>
                                    <div class="layui-input-inline">
                                        <input type="tel" name="phone" autocomplete="off" class="layui-input" style="width: 162px;display: inline-block" id="old_price">
                                        <span class="fr">单位：元</span>
                                    </div>
                                </div>
                                <div class="layui-inline">
                                    <label class="layui-form-label">销售价格</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="email" autocomplete="off" class="layui-input"  style="width: 162px;display: inline-block" id="now_price">
                                        <span class="fr">单位：元</span>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">商品分类</label>
                                <div class="layui-input-block input1"  style="padding: 0;border: none;margin: 0">
                                    <select name="interest" lay-filter="filter" id="select">
                                        <option value=""  selected="">请选择</option>
                                        <option value="手机">手机</option>
                                        <option value="电脑">电脑</option>
                                        <option value="平板">平板</option>
                                        <option value="配件">配件</option>
                                        <option value="办公用品">办公用品</option>
                                        <option value="其他">其他</option>
                                    </select>
                                </div>
                            </div>
                            <!-- <div class="layui-upload">
                                <span style="
                                display: inline-block;
                                padding: 9px 15px;
                                width: 80px;
                                font-weight: 400;
                                line-height: 20px;
                                text-align: right;    font-size: 16px;
                                color: #333333;
                                font-family: '微软雅黑';">商品图片</span>
                                <blockquote class="layui-elem-quote layui-quote-nm" style="margin-top: 10px;width: 479px;display: inline-block">
                                    预览图：
                                    <div class="layui-upload-list" id="demo2"></div>
                                </blockquote>
                                <button type="button" class="layui-btn" id="test2" style="display: block;margin-left: 110px;margin-bottom: 20px">图片上传</button>
                            </div> -->
                            <div class="layui-form-item" style="margin-top: 30px">
                                <label class="layui-form-label">商品图片</label>
                                <ul  class="layui-input-block goodsimg"  id="viewImg">
                                    <!-- <li class="fl" style="margin-left:74px">
                                        <img src="../img/addGoods/xiaomi2.jpg" alt="">
                                        <input type="radio" name="sex" value="设为封面" title="设为封面" checked="">
                                    </li> -->
                                    <!-- <li class="fl" style="margin-left:0" id="viewImg">
                                        <img src="../img/addGoods/xiaomi2.jpg" alt="">
                                        <input type="radio" name="sex" value="设为封面" title="设为封面" checked="">
                                    </li>
                                    <li class="fl" style="margin-left:0" id="viewImg">
                                        <img src="../img/addGoods/xiaomi2.jpg" alt="">
                                        <input type="radio" name="sex" value="设为封面" title="设为封面" checked="">
                                    </li> -->
                                    
                                    <!-- <li class="fl">
                                        <img src="../img/addGoods/u748.png" alt="">
                                        <div id="u749" class="text" style="visibility: visible;transform-origin: 48px 41px;">
                                            <p><span>+</span></p>
                                        </div>
                                    </li> -->
                                  
                                </ul>
                                <input type="file" multiple="multiple"   name="file" id="doc"  style="width:150px;" onchange="javascript:setImagePreviews();" accept="image/*" />
                               
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">库存</label>
                                    <div class="layui-input-inline">
                                        <input type="tel" name="phone" autocomplete="off" class="layui-input" style="display: inline-block;width: 218px;" id="stock">
                                        <span>单位：件</span>
                                    </div>
                                </div>
                            </div>
                            
                           
                            
                            <div class="layui-form-item">
                                <label class="layui-form-label">商品属性</label>
                                <div class="layui-input-block">
                                    <input type="checkbox" name="like[write]" title="热卖" value="热卖"  lay-filter="filter">
                                    <input type="checkbox" name="like[read]" title="推荐" value="推荐" checked=""  lay-filter="filter">
                                    <input type="checkbox" name="like[game]" title="促销" value="促销" lay-filter="filter">
                                </div>
                            </div>
                            
                           
                            <div class="layui-form-item">
                                <label class="layui-form-label">上架</label>
                                <div class="layui-input-block">
                                    <input type="checkbox" checked="" name="open" lay-skin="switch" lay-filter="switchTest" lay-text="ON|OFF">
                                </div>
                            </div>

                            <div class="layui-form-item layui-form-text">
                                <label class="layui-form-label">商品描述</label>
                                <div class="layui-input-block">
                                    <textarea placeholder="请输入内容" class="layui-textarea"  style="width: 518px;height: 170px;padding: 8px" id="description"></textarea>
                                </div>
                            </div>
           
                            <div class="layui-form-item">
                                <div class="layui-input-block">
                                    <button class="layui-btn" lay-submit="" lay-filter="demo1" style="width: 114px;height: 44px;margin-top: 25px" id="btn">确认</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</body>
<script>
        //下面用于多图片上传预览功能
        function setImagePreviews(avalue) {
            //获取选择图片的对象
            var docObj = document.getElementById("doc");
            //后期显示图片区域的对象
            var viewImg = document.getElementById("viewImg");
            viewImg.innerHTML = "";
            //得到所有的图片文件
            var fileList = docObj.files;
            //循环遍历
            for (var i = 0; i < fileList.length; i++) { 
                console.log(fileList.length)   
               
                
               
                
                if (docObj.files && docObj.files[i]) {
                    //火狐下，直接设img属性
                   
                    //imgObjPreview.src = docObj.files[0].getAsDataURL();
                      // 1 创建文件读取对象 实例化一个读取器
        　　　　　　    var reader = new FileReader();

        　　　　　　// 0 通过当前的file标签 获取选择的文件信息
        　　　　　　  console.log(docObj.files[i]);
                    var imgsrc6 = '../img/addGoods/'+(docObj.files[i]).name;
                    console.log(imgsrc6)
                    //火狐7以上版本不能用上面的getAsDataURL()方式获取，需要以下方式
                    // imgObjPreview.src = imgsrc6;   //获取上传图片文件的物理路径

                     //动态添加html元素        
                viewImg.innerHTML += '<li class="fl" style="margin-left:74px"><img  id="img' + i + '" src="'+imgsrc6+'" style="width:100px"><input type="radio" name="sex" value="设为封面" title="设为封面" checked style="display: inline-block">设为封面</li>';
                     //获取图片imgi的对象
                var imgObjPreview = document.getElementById("img"+i); 
                imgObjPreview.style.display = 'block';
                    imgObjPreview.style.width = '100px';
                    imgObjPreview.style.height = '100px';
                    // imgObjPreview.src =window.webkitURL.createObjectURL(docObj.files[i]);
                    // var objUrl=getObjectURL(docObj.files[i]);


                  

        　　　　　　// 2 调用该对象的方法 读取文件 文件
        　　　　　　// 读取文件是一个耗时操作 不一定什么时候读取完毕
        // 　　　　　　reader.readAsDataURL(docObj.files[i]);
        　　　　　　// reader.readAsDataURL(f);

        　　　　　　// 3 添加事件 当文件过大，不能立即读完 通过事件监听进度
        　　　　　　// 耗时操作 通过事件的方式进行注册 并且回调
        // 　　　　　　reader.onload = function (){
        　　　　　　　　// 使用读取完毕的文件
        // 　　　　　　　　console.log(reader.result);
        　　　　　　　　//使用返回的结果 即可
        // 　　　　　　　　document.querySelector('.iconBox').style.background = 'url('+ reader.result+') no-repeat center/cover';
        // 　　　　　　}
                }
                else {
                    //IE下，使用滤镜
                    docObj.select();
                    var imgSrc = document.selection.createRange().text;
                    //alert(imgSrc)
                    var localImagId = document.getElementById("img" + i);
                   //必须设置初始大小
                    localImagId.style.width = "200px";
                    localImagId.style.height = "180px";
                    //图片异常的捕捉，防止用户修改后缀来伪造图片
                    try {
                        localImagId.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)";
                        localImagId.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = imgSrc;
                    }
                    catch (e) {
                        alert("您上传的图片格式不正确，请重新选择!");
                        return false;
                    }
                    imgObjPreview.style.display = 'none';
                    document.selection.empty();
                }
            }  
            return true;
        }
    
        
    </script>
</html>